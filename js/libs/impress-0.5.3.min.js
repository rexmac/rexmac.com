/**
 * impress.js
 *
 * impress.js is a presentation tool based on the power of CSS3 transforms and transitions
 * in modern browsers and inspired by the idea behind prezi.com.
 *
 *
 * Copyright 2011-2012 Bartek Szopka (@bartaz)
 *
 * Released under the MIT and GPL Licenses.
 *
 * ------------------------------------------------
 *  author:  Bartek Szopka
 *  version: 0.5.3
 *  url:     http://bartaz.github.com/impress.js/
 *  source:  http://github.com/bartaz/impress.js/
 */
(function(d,h){var p,s=d.createElement("dummy").style,k=["Webkit","Moz","O","ms","Khtml"],a={};p=function(g){if("undefined"===typeof a[g]){var u=g.charAt(0).toUpperCase()+g.substr(1),u=(g+" "+k.join(u+" ")+u).split(" ");a[g]=null;for(var b in u)if(void 0!==s[u[b]]){a[g]=u[b];break}}return a[g]};var b=function(g,a){var b,e;for(b in a)a.hasOwnProperty(b)&&(e=p(b),null!==e&&(g.style[e]=a[b]));return g},e=function(g,a){return isNaN(g)?a||0:Number(g)},w=function(g){return d.getElementById(g)},z=function(g,
a,b){var e=d.createEvent("CustomEvent");e.initCustomEvent(a,!0,!0,b);g.dispatchEvent(e)},D=function(g){return" translate3d("+g.x+"px,"+g.y+"px,"+g.z+"px) "},E=function(g,a){var b=" rotateX("+g.x+"deg) ",e=" rotateY("+g.y+"deg) ",d=" rotateZ("+g.z+"deg) ";return a?d+e+b:b+e+d},F=function(a){var b=h.innerHeight/a.height,e=h.innerWidth/a.width,b=b>e?e:b;a.maxScale&&b>a.maxScale&&(b=a.maxScale);a.minScale&&b<a.minScale&&(b=a.minScale);return b},n=d.body,A=navigator.userAgent.toLowerCase(),B=null!==p("perspective")&&
n.classList&&n.dataset&&-1===A.search(/(iphone)|(ipod)|(android)/);B?(n.classList.remove("impress-not-supported"),n.classList.add("impress-supported")):n.className+=" impress-not-supported ";var t={},x=function(){return!1};(h.impress=function(a){if(!B)return{init:x,"goto":x,prev:x,next:x};a=a||"impress";if(t["impress-root-"+a])return t["impress-root-"+a];var k={},m=null,q=null,j=null,v=null,p=null,l=w(a),s=d.createElement("div"),C=!1,y=null,A=function(f,a){var c=f.dataset,c={translate:{x:e(c.x),y:e(c.y),
z:e(c.z)},rotate:{x:e(c.rotateX),y:e(c.rotateY),z:e(c.rotateZ||c.rotate)},scale:e(c.scale,1),el:f};f.id||(f.id="step-"+(a+1));k["impress-"+f.id]=c;b(f,{position:"absolute",transform:"translate(-50%,-50%)"+D(c.translate)+E(c.rotate)+(" scale("+c.scale+") "),transformStyle:"preserve-3d"})},G=null,r=function(a,d){var c;if(!(c=!C))c=a,"number"===typeof c?c=0>c?j[j.length+c]:j[c]:"string"===typeof c&&(c=w(c)),c=!(a=c&&c.id&&k["impress-"+c.id]?c:null);if(c)return!1;h.scrollTo(0,0);c=k["impress-"+a.id];
m&&(m.classList.remove("active"),n.classList.remove("impress-on-"+m.id));a.classList.add("active");n.classList.add("impress-on-"+a.id);c={rotate:{x:-c.rotate.x,y:-c.rotate.y,z:-c.rotate.z},translate:{x:-c.translate.x,y:-c.translate.y,z:-c.translate.z},scale:1/c.scale};var g=c.scale>=q.scale;d=e(d,v.transitionDuration);var r=d/2;a===m&&(p=F(v));var t=c.scale*p;m&&m!==a&&y===m&&(z(m,"impress:stepleave"),y=null);b(l,{transform:" perspective("+v.perspective/t+"px) "+(" scale("+t+") "),transitionDuration:d+
"ms",transitionDelay:(g?r:0)+"ms"});b(s,{transform:E(c.rotate,!0)+D(c.translate),transitionDuration:d+"ms",transitionDelay:(g?0:r)+"ms"});if(q.scale===c.scale||q.rotate.x===c.rotate.x&&q.rotate.y===c.rotate.y&&q.rotate.z===c.rotate.z&&q.translate.x===c.translate.x&&q.translate.y===c.translate.y&&q.translate.z===c.translate.z)r=0;q=c;m=a;h.clearTimeout(G);G=h.setTimeout(function(){var a=m;y!==a&&(z(a,"impress:stepenter"),y=a)},d+r);return a};l.addEventListener("impress:init",function(){j.forEach(function(a){a.classList.add("future")});
l.addEventListener("impress:stepenter",function(a){a.target.classList.remove("past");a.target.classList.remove("future");a.target.classList.add("present")},!1);l.addEventListener("impress:stepleave",function(a){a.target.classList.remove("present");a.target.classList.add("past")},!1)},!1);l.addEventListener("impress:init",function(){var a="";l.addEventListener("impress:stepenter",function(b){h.location.hash=a="#/"+b.target.id},!1);h.addEventListener("hashchange",function(){h.location.hash!==a&&r(w(h.location.hash.replace(/^#\/?/,
"")))},!1);r(w(h.location.hash.replace(/^#\/?/,""))||j[0],0)},!1);n.classList.add("impress-disabled");return t["impress-root-"+a]={init:function(){if(!C){var f;f=d;f=f.querySelector("meta[name='viewport']")||d.createElement("meta");f.content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no";f.parentNode!==d.head&&(f.name="viewport",d.head.appendChild(f));f=l.dataset;v={width:e(f.width,1024),height:e(f.height,768),maxScale:e(f.maxScale,1),minScale:e(f.minScale,0),perspective:e(f.perspective,
1E3),transitionDuration:e(f.transitionDuration,1E3)};p=F(v);[].slice.call(l.childNodes).forEach(function(a){s.appendChild(a)});l.appendChild(s);d.documentElement.style.height="100%";b(n,{height:"100%",overflow:"hidden"});f={position:"absolute",transformOrigin:"top left",transition:"all 0s ease-in-out",transformStyle:"preserve-3d"};b(l,f);b(l,{top:"50%",left:"50%",transform:" perspective("+v.perspective/p+"px) "+(" scale("+p+") ")});b(s,f);n.classList.remove("impress-disabled");n.classList.add("impress-enabled");
f=(f=l)||d;f=f.querySelectorAll(".step");j=[].slice.call(f);j.forEach(A);q={translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:1};C=!0;z(l,"impress:init",{api:t["impress-root-"+a]})}},"goto":r,next:function(){var a=j.indexOf(m)+1,a=a<j.length?j[a]:j[0];return r(a)},prev:function(){var a=j.indexOf(m)-1,a=0<=a?j[a]:j[j.length-1];return r(a)}}}).supported=B})(document,window);
(function(d,h){var p=function(d,h){var a=null;return function(){var b=this,e=arguments;clearTimeout(a);a=setTimeout(function(){d.apply(b,e)},h)}};d.addEventListener("impress:init",function(s){var k=s.detail.api;d.addEventListener("keydown",function(a){(9===a.keyCode||32<=a.keyCode&&34>=a.keyCode||37<=a.keyCode&&40>=a.keyCode)&&a.preventDefault()},!1);d.addEventListener("keyup",function(a){if(9===a.keyCode||32<=a.keyCode&&34>=a.keyCode||37<=a.keyCode&&40>=a.keyCode){switch(a.keyCode){case 33:case 37:case 38:k.prev();
break;case 9:case 32:case 34:case 39:case 40:k.next()}a.preventDefault()}},!1);d.addEventListener("click",function(a){for(var b=a.target;"A"!==b.tagName&&b!==d.documentElement;)b=b.parentNode;if("A"===b.tagName){var e=b.getAttribute("href");e&&"#"===e[0]&&(b=d.getElementById(e.slice(1)))}k.goto(b)&&(a.stopImmediatePropagation(),a.preventDefault())},!1);d.addEventListener("click",function(a){for(var b=a.target;(!b.classList.contains("step")||b.classList.contains("active"))&&b!==d.documentElement;)b=
b.parentNode;k.goto(b)&&a.preventDefault()},!1);d.addEventListener("touchstart",function(a){if(1===a.touches.length){var b=a.touches[0].clientX,e=0.3*h.innerWidth,d=null;b<e?d=k.prev():b>h.innerWidth-e&&(d=k.next());d&&a.preventDefault()}},!1);h.addEventListener("resize",p(function(){k.goto(d.querySelector(".active"),500)},250),!1)},!1)})(document,window);
